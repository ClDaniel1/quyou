
function MyAdapt(){
    var mysql=require("mysql");
    this.connection=mysql.createConnection({
        host:'127.0.0.1',
        user:'root',
        password:'12345678',
        port:'3306',
        database:'hf170709_p3'
    });
    this.connection.connect();
    if(!this.connection){
        console.log("打开数据库失败");
    }
    else{
        console.log("打开数据库成功");
    }
}
/*
* 删除、插入的方法
* @sql@ 查询语句
* @params@ 参数
* @callback@ 回调函数
* @result@ 查询结果
* @result.affectedRows==1@返回值 true
* 否则返回 false 删除、插入失败
* */
MyAdapt.prototype.run=function(sql,params,callback){
    this.connection.query(sql,params,function(err,result){
        if(err){
            callback(false);
        }else{
            if(result.affectedRows==1){
                callback(true);
            }else{
                callback(false);
            }
        }
    });
};
/*
 * 更新的方法
 * @sql@ 查询语句
 * @params@ 参数
 * @callback@ 回调函数
 * @result@ 查询结果
 * @result.changedRows==0@返回值 true 更新成功
 * 否则返回 false 更新失败
 * */
MyAdapt.prototype.update=function(sql,params,callback){
    this.connection.query(sql,params,function(err,result){
        if(err){
            callback(false);
        }else{
                callback(true);

        }
    });
};
/*
 * 查询的方法
 * @sql@ 查询语句
 * @params@ 参数
 * @callback@ 回调函数
 * @result@ 结果返回值
 * */
MyAdapt.prototype.all=function(sql,params,callback){
    this.connection.query(sql,params,function(err,result){
        if(err){
            callback(false);
        }else{
            callback(true,result);
        }
    });
};
module.exports = new MyAdapt();//输出一个类 new MyAdapter（）输出一个类的对象

