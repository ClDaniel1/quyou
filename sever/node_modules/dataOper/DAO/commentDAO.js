var Comment = function () {
    this.ada = require('../adapter');
};

Comment.prototype.addComment = function (userPhone,orderId,Comment,tradeId,callback) {
    var sql = "insert into t_comment(userPhone,orderId,commentC,tradeID,commentTime) values(?,?,?,?,Date('now','LocalTime'))";
    this.ada.run(sql,[userPhone,orderId,Comment,tradeId],function (res) {
        callback(res);
    })
};

Comment.prototype.getComment = function (tradeId,callback) {
    var sql = "select a.*,b.userName,b.userImg from t_comment a inner join t_user b on a.userPhone = b.userPhone where tradeID = ?";
    this.ada.all(sql,[tradeId],function (res,data) {
        if(res){
            callback(res,data);
        }
        else {
            callback(res);
        }
    })
};

module.exports = new Comment();