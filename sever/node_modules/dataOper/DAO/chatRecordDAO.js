var ChatRecord = function () {
    this.ada = require('../adapter');
};

ChatRecord.prototype.addRecord = function (sendId,receiveId,content) {
    var sql = "insert into t_chatrecord(sendId,receiveId,content,recordTime)  values(?,?,?,time(now()))";
    this.ada.run(sql,[sendId,receiveId,content],function () {

    })
};

ChatRecord.prototype.getRecord = function (vistorId, callback) {
    var sql = "select * from t_chatrecord where sendId=? or receiveId = ?";
    this.ada.all(sql,[vistorId,vistorId],function (res,data) {
        if(res){
            callback(res,data);
        }
        else {
            callback(res);
        }
    })
};

module.exports = new ChatRecord();